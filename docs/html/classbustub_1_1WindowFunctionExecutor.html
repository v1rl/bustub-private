<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.9.1"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>BusTub: bustub::WindowFunctionExecutor Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">BusTub
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.1 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="namespacebustub.html">bustub</a></li><li class="navelem"><a class="el" href="classbustub_1_1WindowFunctionExecutor.html">WindowFunctionExecutor</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="classbustub_1_1WindowFunctionExecutor-members.html">List of all members</a>  </div>
  <div class="headertitle">
<div class="title">bustub::WindowFunctionExecutor Class Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p><code>#include &lt;<a class="el" href="window__function__executor_8h_source.html">window_function_executor.h</a>&gt;</code></p>
<div class="dynheader">
Inheritance diagram for bustub::WindowFunctionExecutor:</div>
<div class="dyncontent">
<div class="center"><iframe scrolling="no" frameborder="0" src="classbustub_1_1WindowFunctionExecutor__inherit__graph.svg" width="248" height="112"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe>
</div>
<center><span class="legend">[<a href="graph_legend.html">legend</a>]</span></center></div>
<div class="dynheader">
Collaboration diagram for bustub::WindowFunctionExecutor:</div>
<div class="dyncontent">
<div class="center"><iframe scrolling="no" frameborder="0" src="classbustub_1_1WindowFunctionExecutor__coll__graph.svg" width="248" height="203"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe>
</div>
<center><span class="legend">[<a href="graph_legend.html">legend</a>]</span></center></div>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:a3daca279d51faa5a552fc3aa66bf14d8"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classbustub_1_1WindowFunctionExecutor.html#a3daca279d51faa5a552fc3aa66bf14d8">WindowFunctionExecutor</a> (<a class="el" href="classbustub_1_1ExecutorContext.html">ExecutorContext</a> *exec_ctx, const <a class="el" href="classbustub_1_1WindowFunctionPlanNode.html">WindowFunctionPlanNode</a> *plan, std::unique_ptr&lt; <a class="el" href="classbustub_1_1AbstractExecutor.html">AbstractExecutor</a> &gt; &amp;&amp;child_executor)</td></tr>
<tr class="separator:a3daca279d51faa5a552fc3aa66bf14d8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9e10aa19f60cdeace1a63979bb7b1d82"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classbustub_1_1WindowFunctionExecutor.html#a9e10aa19f60cdeace1a63979bb7b1d82">Init</a> () override</td></tr>
<tr class="separator:a9e10aa19f60cdeace1a63979bb7b1d82"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3809c4ee264ff6d679e535467ee8bf7e"><td class="memItemLeft" align="right" valign="top">auto&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classbustub_1_1WindowFunctionExecutor.html#a3809c4ee264ff6d679e535467ee8bf7e">Next</a> (<a class="el" href="classbustub_1_1Tuple.html">Tuple</a> *tuple, <a class="el" href="classbustub_1_1RID.html">RID</a> *rid) -&gt; bool override</td></tr>
<tr class="separator:a3809c4ee264ff6d679e535467ee8bf7e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a87c80a0fb2288d0d2ce5698e00b85b04"><td class="memItemLeft" align="right" valign="top">auto&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classbustub_1_1WindowFunctionExecutor.html#a87c80a0fb2288d0d2ce5698e00b85b04">GetOutputSchema</a> () const -&gt; const <a class="el" href="classbustub_1_1Schema.html">Schema</a> &amp;override</td></tr>
<tr class="separator:a87c80a0fb2288d0d2ce5698e00b85b04"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="inherit_header pub_methods_classbustub_1_1AbstractExecutor"><td colspan="2" onclick="javascript:toggleInherit('pub_methods_classbustub_1_1AbstractExecutor')"><img src="closed.png" alt="-"/>&#160;Public Member Functions inherited from <a class="el" href="classbustub_1_1AbstractExecutor.html">bustub::AbstractExecutor</a></td></tr>
<tr class="memitem:a77aac90325e53499c7dc96fea4a0f6c9 inherit pub_methods_classbustub_1_1AbstractExecutor"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classbustub_1_1AbstractExecutor.html#a77aac90325e53499c7dc96fea4a0f6c9">AbstractExecutor</a> (<a class="el" href="classbustub_1_1ExecutorContext.html">ExecutorContext</a> *exec_ctx)</td></tr>
<tr class="separator:a77aac90325e53499c7dc96fea4a0f6c9 inherit pub_methods_classbustub_1_1AbstractExecutor"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab28201d3024a7b09e8c41af42a8def68 inherit pub_methods_classbustub_1_1AbstractExecutor"><td class="memItemLeft" align="right" valign="top">virtual&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classbustub_1_1AbstractExecutor.html#ab28201d3024a7b09e8c41af42a8def68">~AbstractExecutor</a> ()=default</td></tr>
<tr class="separator:ab28201d3024a7b09e8c41af42a8def68 inherit pub_methods_classbustub_1_1AbstractExecutor"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab9895b6c56048bdd668aebd506c7d444 inherit pub_methods_classbustub_1_1AbstractExecutor"><td class="memItemLeft" align="right" valign="top">auto&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classbustub_1_1AbstractExecutor.html#ab9895b6c56048bdd668aebd506c7d444">GetExecutorContext</a> () -&gt; <a class="el" href="classbustub_1_1ExecutorContext.html">ExecutorContext</a> *</td></tr>
<tr class="separator:ab9895b6c56048bdd668aebd506c7d444 inherit pub_methods_classbustub_1_1AbstractExecutor"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="inherited"></a>
Additional Inherited Members</h2></td></tr>
<tr class="inherit_header pro_attribs_classbustub_1_1AbstractExecutor"><td colspan="2" onclick="javascript:toggleInherit('pro_attribs_classbustub_1_1AbstractExecutor')"><img src="closed.png" alt="-"/>&#160;Protected Attributes inherited from <a class="el" href="classbustub_1_1AbstractExecutor.html">bustub::AbstractExecutor</a></td></tr>
<tr class="memitem:a5591a244cd884bbae01ebbc58b3b2769 inherit pro_attribs_classbustub_1_1AbstractExecutor"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classbustub_1_1ExecutorContext.html">ExecutorContext</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classbustub_1_1AbstractExecutor.html#a5591a244cd884bbae01ebbc58b3b2769">exec_ctx_</a></td></tr>
<tr class="separator:a5591a244cd884bbae01ebbc58b3b2769 inherit pro_attribs_classbustub_1_1AbstractExecutor"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>The <a class="el" href="classbustub_1_1WindowFunctionExecutor.html">WindowFunctionExecutor</a> executor executes a window function for columns using window function.</p>
<p>Window function is different from normal aggregation as it outputs one row for each inputing rows, and can be combined with normal selected columns. The columns in <a class="el" href="classbustub_1_1WindowFunctionPlanNode.html">WindowFunctionPlanNode</a> contains both normal selected columns and placeholder columns for window functions.</p>
<p>For example, if we have a query like: SELECT 0.1, 0.2, SUM(0.3) OVER (PARTITION BY 0.2 ORDER BY 0.3), SUM(0.4) OVER (PARTITION BY 0.1 ORDER BY 0.2,0.3) FROM table;</p>
<p>The <a class="el" href="classbustub_1_1WindowFunctionPlanNode.html">WindowFunctionPlanNode</a> contains following structure: columns: std::vector&lt;AbstractExpressionRef&gt;{0.1, 0.2, 0.-1(placeholder), 0.-1(placeholder)} window_functions_: { 3: { partition_by: std::vector&lt;AbstractExpressionRef&gt;{0.2} order_by: std::vector&lt;AbstractExpressionRef&gt;{0.3} functions: std::vector&lt;AbstractExpressionRef&gt;{0.3} window_func_type: WindowFunctionType::SumAggregate } 4: { partition_by: std::vector&lt;AbstractExpressionRef&gt;{0.1} order_by: std::vector&lt;AbstractExpressionRef&gt;{0.2,0.3} functions: std::vector&lt;AbstractExpressionRef&gt;{0.4} window_func_type: WindowFunctionType::SumAggregate } }</p>
<p>Your executor should use child executor and exprs in columns to produce selected columns except for window function columns, and use window_agg_indexes, partition_bys, order_bys, functionss and window_agg_types to generate window function columns results. Directly use placeholders for window function columns in columns is not allowed, as it contains invalid column id.</p>
<p>Your <a class="el" href="classbustub_1_1WindowFunctionExecutor.html">WindowFunctionExecutor</a> does not need to support specified window frames (eg: 1 preceding and 1 following). You can assume that all window frames are UNBOUNDED FOLLOWING AND CURRENT ROW when there is ORDER BY clause, and UNBOUNDED PRECEDING AND UNBOUNDED FOLLOWING when there is no ORDER BY clause. </p>
</div><h2 class="groupheader">Constructor &amp; Destructor Documentation</h2>
<a id="a3daca279d51faa5a552fc3aa66bf14d8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3daca279d51faa5a552fc3aa66bf14d8">&#9670;&nbsp;</a></span>WindowFunctionExecutor()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bustub::WindowFunctionExecutor::WindowFunctionExecutor </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classbustub_1_1ExecutorContext.html">ExecutorContext</a> *&#160;</td>
          <td class="paramname"><em>exec_ctx</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="classbustub_1_1WindowFunctionPlanNode.html">WindowFunctionPlanNode</a> *&#160;</td>
          <td class="paramname"><em>plan</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">std::unique_ptr&lt; <a class="el" href="classbustub_1_1AbstractExecutor.html">AbstractExecutor</a> &gt; &amp;&amp;&#160;</td>
          <td class="paramname"><em>child_executor</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Construct a new <a class="el" href="classbustub_1_1WindowFunctionExecutor.html">WindowFunctionExecutor</a> instance. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">exec_ctx</td><td>The executor context </td></tr>
    <tr><td class="paramname">plan</td><td>The window aggregation plan to be executed </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<h2 class="groupheader">Member Function Documentation</h2>
<a id="a87c80a0fb2288d0d2ce5698e00b85b04"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a87c80a0fb2288d0d2ce5698e00b85b04">&#9670;&nbsp;</a></span>GetOutputSchema()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">auto bustub::WindowFunctionExecutor::GetOutputSchema </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const -&gt; const <a class="el" href="classbustub_1_1Schema.html">Schema</a> &amp;</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">override</span><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<dl class="section return"><dt>Returns</dt><dd>The output schema for the window aggregation plan </dd></dl>

<p>Implements <a class="el" href="classbustub_1_1AbstractExecutor.html#ab72f75f9f8f5728a727609bd70070888">bustub::AbstractExecutor</a>.</p>

</div>
</div>
<a id="a9e10aa19f60cdeace1a63979bb7b1d82"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9e10aa19f60cdeace1a63979bb7b1d82">&#9670;&nbsp;</a></span>Init()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void bustub::WindowFunctionExecutor::Init </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">override</span><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Initialize the window aggregation </p>

<p>Implements <a class="el" href="classbustub_1_1AbstractExecutor.html#a8de18536ea3222d01514b14387082ec8">bustub::AbstractExecutor</a>.</p>

</div>
</div>
<a id="a3809c4ee264ff6d679e535467ee8bf7e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3809c4ee264ff6d679e535467ee8bf7e">&#9670;&nbsp;</a></span>Next()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">auto bustub::WindowFunctionExecutor::Next </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classbustub_1_1Tuple.html">Tuple</a> *&#160;</td>
          <td class="paramname"><em>tuple</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classbustub_1_1RID.html">RID</a> *&#160;</td>
          <td class="paramname"><em>rid</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> -&gt; bool</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">override</span><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Yield the next tuple from the window aggregation. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[out]</td><td class="paramname">tuple</td><td>The next tuple produced by the window aggregation </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">rid</td><td>The next tuple <a class="el" href="classbustub_1_1RID.html">RID</a> produced by the window aggregation </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd><code>true</code> if a tuple was produced, <code>false</code> if there are no more tuples </dd></dl>

<p>Implements <a class="el" href="classbustub_1_1AbstractExecutor.html#aa0eeb57bf174ccd25466e2b137024b4d">bustub::AbstractExecutor</a>.</p>

</div>
</div>
<hr/>The documentation for this class was generated from the following files:<ul>
<li>src/include/execution/executors/<a class="el" href="window__function__executor_8h_source.html">window_function_executor.h</a></li>
<li>src/execution/window_function_executor.cpp</li>
</ul>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.1
</small></address>
</body>
</html>
