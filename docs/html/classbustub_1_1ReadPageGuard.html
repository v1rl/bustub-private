<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.9.1"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>BusTub: bustub::ReadPageGuard Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">BusTub
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.1 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="namespacebustub.html">bustub</a></li><li class="navelem"><a class="el" href="classbustub_1_1ReadPageGuard.html">ReadPageGuard</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#friends">Friends</a> &#124;
<a href="classbustub_1_1ReadPageGuard-members.html">List of all members</a>  </div>
  <div class="headertitle">
<div class="title">bustub::ReadPageGuard Class Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>An RAII object that grants thread-safe read access to a page of data.  
 <a href="classbustub_1_1ReadPageGuard.html#details">More...</a></p>

<p><code>#include &lt;<a class="el" href="page__guard_8h_source.html">page_guard.h</a>&gt;</code></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:a4c0be5e02c42a19c58d02c0a863f578d"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classbustub_1_1ReadPageGuard.html#a4c0be5e02c42a19c58d02c0a863f578d">ReadPageGuard</a> ()=default</td></tr>
<tr class="memdesc:a4c0be5e02c42a19c58d02c0a863f578d"><td class="mdescLeft">&#160;</td><td class="mdescRight">The default constructor for a <code><a class="el" href="classbustub_1_1ReadPageGuard.html" title="An RAII object that grants thread-safe read access to a page of data.">ReadPageGuard</a></code>.  <a href="classbustub_1_1ReadPageGuard.html#a4c0be5e02c42a19c58d02c0a863f578d">More...</a><br /></td></tr>
<tr class="separator:a4c0be5e02c42a19c58d02c0a863f578d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a85fa784e752dc64aa011f2b056bd2385"><td class="memItemLeft" align="right" valign="top"><a id="a85fa784e752dc64aa011f2b056bd2385"></a>
&#160;</td><td class="memItemRight" valign="bottom"><b>ReadPageGuard</b> (const <a class="el" href="classbustub_1_1ReadPageGuard.html">ReadPageGuard</a> &amp;)=delete</td></tr>
<tr class="separator:a85fa784e752dc64aa011f2b056bd2385"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad714c557b7a9f1d1fa1bddcf4ad202d8"><td class="memItemLeft" align="right" valign="top"><a id="ad714c557b7a9f1d1fa1bddcf4ad202d8"></a>
auto&#160;</td><td class="memItemRight" valign="bottom"><b>operator=</b> (const <a class="el" href="classbustub_1_1ReadPageGuard.html">ReadPageGuard</a> &amp;) -&gt; <a class="el" href="classbustub_1_1ReadPageGuard.html">ReadPageGuard</a> &amp;=delete</td></tr>
<tr class="separator:ad714c557b7a9f1d1fa1bddcf4ad202d8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac7469839317d293bef0e8fa6b3537e18"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classbustub_1_1ReadPageGuard.html#ac7469839317d293bef0e8fa6b3537e18">ReadPageGuard</a> (<a class="el" href="classbustub_1_1ReadPageGuard.html">ReadPageGuard</a> &amp;&amp;that) noexcept</td></tr>
<tr class="memdesc:ac7469839317d293bef0e8fa6b3537e18"><td class="mdescLeft">&#160;</td><td class="mdescRight">The move constructor for <code><a class="el" href="classbustub_1_1ReadPageGuard.html" title="An RAII object that grants thread-safe read access to a page of data.">ReadPageGuard</a></code>.  <a href="classbustub_1_1ReadPageGuard.html#ac7469839317d293bef0e8fa6b3537e18">More...</a><br /></td></tr>
<tr class="separator:ac7469839317d293bef0e8fa6b3537e18"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2b23509f98a1380562780b891d83406e"><td class="memItemLeft" align="right" valign="top">auto&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classbustub_1_1ReadPageGuard.html#a2b23509f98a1380562780b891d83406e">operator=</a> (<a class="el" href="classbustub_1_1ReadPageGuard.html">ReadPageGuard</a> &amp;&amp;that) noexcept -&gt; <a class="el" href="classbustub_1_1ReadPageGuard.html">ReadPageGuard</a> &amp;</td></tr>
<tr class="memdesc:a2b23509f98a1380562780b891d83406e"><td class="mdescLeft">&#160;</td><td class="mdescRight">The move assignment operator for <code><a class="el" href="classbustub_1_1ReadPageGuard.html" title="An RAII object that grants thread-safe read access to a page of data.">ReadPageGuard</a></code>.  <a href="classbustub_1_1ReadPageGuard.html#a2b23509f98a1380562780b891d83406e">More...</a><br /></td></tr>
<tr class="separator:a2b23509f98a1380562780b891d83406e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aeeaa13d141d4a3b586940bc4ac699871"><td class="memItemLeft" align="right" valign="top"><a id="aeeaa13d141d4a3b586940bc4ac699871"></a>
auto&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classbustub_1_1ReadPageGuard.html#aeeaa13d141d4a3b586940bc4ac699871">GetPageId</a> () const -&gt; page_id_t</td></tr>
<tr class="memdesc:aeeaa13d141d4a3b586940bc4ac699871"><td class="mdescLeft">&#160;</td><td class="mdescRight">Gets the page ID of the page this guard is protecting. <br /></td></tr>
<tr class="separator:aeeaa13d141d4a3b586940bc4ac699871"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4784b23b93aa1497d8397f51ef955b57"><td class="memItemLeft" align="right" valign="top"><a id="a4784b23b93aa1497d8397f51ef955b57"></a>
auto&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classbustub_1_1ReadPageGuard.html#a4784b23b93aa1497d8397f51ef955b57">GetData</a> () const -&gt; const char *</td></tr>
<tr class="memdesc:a4784b23b93aa1497d8397f51ef955b57"><td class="mdescLeft">&#160;</td><td class="mdescRight">Gets a <code>const</code> pointer to the page of data this guard is protecting. <br /></td></tr>
<tr class="separator:a4784b23b93aa1497d8397f51ef955b57"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4ccafbe0678e121441889d33b7c69831"><td class="memTemplParams" colspan="2"><a id="a4ccafbe0678e121441889d33b7c69831"></a>
template&lt;class T &gt; </td></tr>
<tr class="memitem:a4ccafbe0678e121441889d33b7c69831"><td class="memTemplItemLeft" align="right" valign="top">auto&#160;</td><td class="memTemplItemRight" valign="bottom"><b>As</b> () const -&gt; const T *</td></tr>
<tr class="separator:a4ccafbe0678e121441889d33b7c69831"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a341b9e98a1cf275b89c06eed50bad8cd"><td class="memItemLeft" align="right" valign="top"><a id="a341b9e98a1cf275b89c06eed50bad8cd"></a>
auto&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classbustub_1_1ReadPageGuard.html#a341b9e98a1cf275b89c06eed50bad8cd">IsDirty</a> () const -&gt; bool</td></tr>
<tr class="memdesc:a341b9e98a1cf275b89c06eed50bad8cd"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns whether the page is dirty (modified but not flushed to the disk). <br /></td></tr>
<tr class="separator:a341b9e98a1cf275b89c06eed50bad8cd"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aab3db86826571bcebe7a629e6dd6c459"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classbustub_1_1ReadPageGuard.html#aab3db86826571bcebe7a629e6dd6c459">Flush</a> ()</td></tr>
<tr class="memdesc:aab3db86826571bcebe7a629e6dd6c459"><td class="mdescLeft">&#160;</td><td class="mdescRight">Flushes this page's data safely to disk.  <a href="classbustub_1_1ReadPageGuard.html#aab3db86826571bcebe7a629e6dd6c459">More...</a><br /></td></tr>
<tr class="separator:aab3db86826571bcebe7a629e6dd6c459"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac2895fff0ad5dcf9bbca52345e74599e"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classbustub_1_1ReadPageGuard.html#ac2895fff0ad5dcf9bbca52345e74599e">Drop</a> ()</td></tr>
<tr class="memdesc:ac2895fff0ad5dcf9bbca52345e74599e"><td class="mdescLeft">&#160;</td><td class="mdescRight">Manually drops a valid <code><a class="el" href="classbustub_1_1ReadPageGuard.html" title="An RAII object that grants thread-safe read access to a page of data.">ReadPageGuard</a></code>'s data. If this guard is invalid, this function does nothing.  <a href="classbustub_1_1ReadPageGuard.html#ac2895fff0ad5dcf9bbca52345e74599e">More...</a><br /></td></tr>
<tr class="separator:ac2895fff0ad5dcf9bbca52345e74599e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5adba3d6bd4d971f8ff6e41889fc9c82"><td class="memItemLeft" align="right" valign="top"><a id="a5adba3d6bd4d971f8ff6e41889fc9c82"></a>
&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classbustub_1_1ReadPageGuard.html#a5adba3d6bd4d971f8ff6e41889fc9c82">~ReadPageGuard</a> ()</td></tr>
<tr class="memdesc:a5adba3d6bd4d971f8ff6e41889fc9c82"><td class="mdescLeft">&#160;</td><td class="mdescRight">The destructor for <code><a class="el" href="classbustub_1_1ReadPageGuard.html" title="An RAII object that grants thread-safe read access to a page of data.">ReadPageGuard</a></code>. This destructor simply calls <code><a class="el" href="classbustub_1_1ReadPageGuard.html#ac2895fff0ad5dcf9bbca52345e74599e" title="Manually drops a valid ReadPageGuard&#39;s data. If this guard is invalid, this function does nothing.">Drop()</a></code>. <br /></td></tr>
<tr class="separator:a5adba3d6bd4d971f8ff6e41889fc9c82"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="friends"></a>
Friends</h2></td></tr>
<tr class="memitem:aacdcadb3a97ed0cf5b98e4e4b88eea34"><td class="memItemLeft" align="right" valign="top"><a id="aacdcadb3a97ed0cf5b98e4e4b88eea34"></a>
class&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classbustub_1_1ReadPageGuard.html#aacdcadb3a97ed0cf5b98e4e4b88eea34">BufferPoolManager</a></td></tr>
<tr class="memdesc:aacdcadb3a97ed0cf5b98e4e4b88eea34"><td class="mdescLeft">&#160;</td><td class="mdescRight">Only the buffer pool manager is allowed to construct a valid <code><a class="el" href="classbustub_1_1ReadPageGuard.html" title="An RAII object that grants thread-safe read access to a page of data.">ReadPageGuard</a>.</code> <br /></td></tr>
<tr class="separator:aacdcadb3a97ed0cf5b98e4e4b88eea34"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>An RAII object that grants thread-safe read access to a page of data. </p>
<p>The <em>only</em> way that the BusTub system should interact with the buffer pool's page data is via page guards. Since <code><a class="el" href="classbustub_1_1ReadPageGuard.html" title="An RAII object that grants thread-safe read access to a page of data.">ReadPageGuard</a></code> is an RAII object, the system never has to manually lock and unlock a page's latch.</p>
<p>With <code><a class="el" href="classbustub_1_1ReadPageGuard.html" title="An RAII object that grants thread-safe read access to a page of data.">ReadPageGuard</a></code>s, there can be multiple threads that share read access to a page's data. However, the existence of any <code><a class="el" href="classbustub_1_1ReadPageGuard.html" title="An RAII object that grants thread-safe read access to a page of data.">ReadPageGuard</a></code> on a page implies that no thread can be mutating the page's data. </p>
</div><h2 class="groupheader">Constructor &amp; Destructor Documentation</h2>
<a id="a4c0be5e02c42a19c58d02c0a863f578d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4c0be5e02c42a19c58d02c0a863f578d">&#9670;&nbsp;</a></span>ReadPageGuard() <span class="overload">[1/2]</span></h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bustub::ReadPageGuard::ReadPageGuard </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">default</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>The default constructor for a <code><a class="el" href="classbustub_1_1ReadPageGuard.html" title="An RAII object that grants thread-safe read access to a page of data.">ReadPageGuard</a></code>. </p>
<p>Note that we do not EVER want use a guard that has only been default constructed. The only reason we even define this default constructor is to enable placing an "uninitialized" guard on the stack that we can later move assign via <code>=</code>.</p>
<p><b>Use of an uninitialized page guard is undefined behavior.</b></p>
<p>In other words, the only way to get a valid <code><a class="el" href="classbustub_1_1ReadPageGuard.html" title="An RAII object that grants thread-safe read access to a page of data.">ReadPageGuard</a></code> is through the buffer pool manager. </p>

</div>
</div>
<a id="ac7469839317d293bef0e8fa6b3537e18"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac7469839317d293bef0e8fa6b3537e18">&#9670;&nbsp;</a></span>ReadPageGuard() <span class="overload">[2/2]</span></h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bustub::ReadPageGuard::ReadPageGuard </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classbustub_1_1ReadPageGuard.html">ReadPageGuard</a> &amp;&amp;&#160;</td>
          <td class="paramname"><em>that</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">noexcept</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>The move constructor for <code><a class="el" href="classbustub_1_1ReadPageGuard.html" title="An RAII object that grants thread-safe read access to a page of data.">ReadPageGuard</a></code>. </p>
<h3><a class="anchor" id="autotoc_md57"></a>
Implementation</h3>
<p>If you are unfamiliar with move semantics, please familiarize yourself with learning materials online. There are many great resources (including articles, Microsoft tutorials, YouTube videos) that explain this in depth.</p>
<p>Make sure you invalidate the other guard, otherwise you might run into double free problems! For both objects, you need to update <em>at least</em> 5 fields each.</p>
<p>TODO(P1): Add implementation.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">that</td><td>The other page guard. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<h2 class="groupheader">Member Function Documentation</h2>
<a id="ac2895fff0ad5dcf9bbca52345e74599e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac2895fff0ad5dcf9bbca52345e74599e">&#9670;&nbsp;</a></span>Drop()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void bustub::ReadPageGuard::Drop </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Manually drops a valid <code><a class="el" href="classbustub_1_1ReadPageGuard.html" title="An RAII object that grants thread-safe read access to a page of data.">ReadPageGuard</a></code>'s data. If this guard is invalid, this function does nothing. </p>
<h3><a class="anchor" id="autotoc_md59"></a>
Implementation</h3>
<p>Make sure you don't double free! Also, think <b>very</b> <b>VERY</b> carefully about what resources you own and the order in which you release those resources. If you get the ordering wrong, you will very likely fail one of the later Gradescope tests. You may also want to take the buffer pool manager's latch in a very specific scenario...</p>
<p>TODO(P1): Add implementation. </p>

</div>
</div>
<a id="aab3db86826571bcebe7a629e6dd6c459"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aab3db86826571bcebe7a629e6dd6c459">&#9670;&nbsp;</a></span>Flush()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void bustub::ReadPageGuard::Flush </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Flushes this page's data safely to disk. </p>
<p>TODO(P1): Add implementation. </p>

</div>
</div>
<a id="a2b23509f98a1380562780b891d83406e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2b23509f98a1380562780b891d83406e">&#9670;&nbsp;</a></span>operator=()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">auto bustub::ReadPageGuard::operator= </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classbustub_1_1ReadPageGuard.html">ReadPageGuard</a> &amp;&amp;&#160;</td>
          <td class="paramname"><em>that</em></td><td>)</td>
          <td> -&gt; <a class="el" href="classbustub_1_1ReadPageGuard.html">ReadPageGuard</a> &amp;</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">noexcept</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>The move assignment operator for <code><a class="el" href="classbustub_1_1ReadPageGuard.html" title="An RAII object that grants thread-safe read access to a page of data.">ReadPageGuard</a></code>. </p>
<h3><a class="anchor" id="autotoc_md58"></a>
Implementation</h3>
<p>If you are unfamiliar with move semantics, please familiarize yourself with learning materials online. There are many great resources (including articles, Microsoft tutorials, YouTube videos) that explain this in depth.</p>
<p>Make sure you invalidate the other guard, otherwise you might run into double free problems! For both objects, you need to update <em>at least</em> 5 fields each, and for the current object, make sure you release any resources it might be holding on to.</p>
<p>TODO(P1): Add implementation.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">that</td><td>The other page guard. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd><a class="el" href="classbustub_1_1ReadPageGuard.html" title="An RAII object that grants thread-safe read access to a page of data.">ReadPageGuard</a>&amp; The newly valid <code><a class="el" href="classbustub_1_1ReadPageGuard.html" title="An RAII object that grants thread-safe read access to a page of data.">ReadPageGuard</a></code>. </dd></dl>

</div>
</div>
<hr/>The documentation for this class was generated from the following files:<ul>
<li>src/include/storage/page/<a class="el" href="page__guard_8h_source.html">page_guard.h</a></li>
<li>src/storage/page/page_guard.cpp</li>
</ul>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.1
</small></address>
</body>
</html>
